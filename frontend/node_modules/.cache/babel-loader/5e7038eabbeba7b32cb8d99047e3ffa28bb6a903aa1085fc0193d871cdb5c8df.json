{"ast":null,"code":"var _jsxFileName = \"/Users/jyotiranjanrout/Desktop/devops/frontend/src/contexts/FileContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState } from 'react';\nimport { useAuth } from './AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FileContext = /*#__PURE__*/createContext(undefined);\nexport const useFiles = () => {\n  _s();\n  const context = useContext(FileContext);\n  if (context === undefined) {\n    throw new Error('useFiles must be used within a FileProvider');\n  }\n  return context;\n};\n_s(useFiles, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const FileProvider = ({\n  children\n}) => {\n  _s2();\n  const [files, setFiles] = useState([]);\n  const [folders, setFolders] = useState([]);\n  const [currentFolder, setCurrentFolder] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const {\n    token\n  } = useAuth();\n  const apiCall = async (url, options = {}) => {\n    const response = await fetch(`http://localhost:3001${url}`, {\n      ...options,\n      headers: {\n        Authorization: `Bearer ${token}`,\n        ...options.headers\n      }\n    });\n    if (!response.ok) {\n      throw new Error(`API call failed: ${response.statusText}`);\n    }\n    return response.json();\n  };\n  const uploadFile = async (file, folderId) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    if (folderId) {\n      formData.append('folderId', folderId);\n    }\n    await apiCall('/api/files/upload', {\n      method: 'POST',\n      body: formData\n    });\n\n    // Reload files after upload\n    await loadFiles(folderId);\n  };\n  const uploadFiles = async (fileList, folderId) => {\n    setLoading(true);\n    try {\n      for (const file of fileList) {\n        await uploadFile(file, folderId);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n  const deleteFile = async fileId => {\n    await apiCall(`/api/files/${fileId}`, {\n      method: 'DELETE'\n    });\n\n    // Remove file from local state\n    setFiles(prev => prev.filter(file => file.id !== fileId));\n  };\n  const createFolder = async (name, parentId) => {\n    await apiCall('/api/folders', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name,\n        parentId\n      })\n    });\n\n    // Reload folders after creation\n    await loadFolders(parentId);\n  };\n  const deleteFolder = async folderId => {\n    await apiCall(`/api/folders/${folderId}`, {\n      method: 'DELETE'\n    });\n\n    // Remove folder from local state\n    setFolders(prev => prev.filter(folder => folder.id !== folderId));\n  };\n  const loadFiles = async folderId => {\n    setLoading(true);\n    try {\n      const response = await apiCall(`/api/files${folderId ? `?folderId=${folderId}` : ''}`);\n      setFiles(response.data.files);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const loadFolders = async parentId => {\n    setLoading(true);\n    try {\n      const response = await apiCall(`/api/folders${parentId ? `?parentId=${parentId}` : ''}`);\n      setFolders(response.data.folders);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const downloadFile = async fileId => {\n    const response = await apiCall(`/api/files/${fileId}/download`);\n    const {\n      downloadUrl,\n      fileName\n    } = response.data;\n\n    // Create a temporary anchor element to trigger download\n    const link = document.createElement('a');\n    link.href = downloadUrl;\n    link.download = fileName;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n  const searchFiles = async query => {\n    const response = await apiCall(`/api/files?search=${encodeURIComponent(query)}`);\n    return response.data.files;\n  };\n  const value = {\n    files,\n    folders,\n    currentFolder,\n    loading,\n    uploadFile,\n    uploadFiles,\n    deleteFile,\n    createFolder,\n    deleteFolder,\n    loadFiles,\n    loadFolders,\n    setCurrentFolder,\n    downloadFile,\n    searchFiles\n  };\n  return /*#__PURE__*/_jsxDEV(FileContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 195,\n    columnNumber: 10\n  }, this);\n};\n_s2(FileProvider, \"T7g6Tyjtf9tzXf6MuoL0AR4LLVA=\", false, function () {\n  return [useAuth];\n});\n_c = FileProvider;\nvar _c;\n$RefreshReg$(_c, \"FileProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useAuth","jsxDEV","_jsxDEV","FileContext","undefined","useFiles","_s","context","Error","FileProvider","children","_s2","files","setFiles","folders","setFolders","currentFolder","setCurrentFolder","loading","setLoading","token","apiCall","url","options","response","fetch","headers","Authorization","ok","statusText","json","uploadFile","file","folderId","formData","FormData","append","method","body","loadFiles","uploadFiles","fileList","deleteFile","fileId","prev","filter","id","createFolder","name","parentId","JSON","stringify","loadFolders","deleteFolder","folder","data","downloadFile","downloadUrl","fileName","link","document","createElement","href","download","appendChild","click","removeChild","searchFiles","query","encodeURIComponent","value","Provider","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/jyotiranjanrout/Desktop/devops/frontend/src/contexts/FileContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, ReactNode } from 'react';\nimport { useAuth } from './AuthContext';\n\ninterface FileItem {\n  id: string;\n  name: string;\n  originalName: string;\n  mimeType: string;\n  size: number;\n  isPublic: boolean;\n  downloadCount: number;\n  createdAt: string;\n  updatedAt: string;\n}\n\ninterface FolderItem {\n  id: string;\n  name: string;\n  parentId?: string;\n  isPublic: boolean;\n  color?: string;\n  createdAt: string;\n  updatedAt: string;\n  children?: FolderItem[];\n  files?: FileItem[];\n}\n\ninterface FileContextType {\n  files: FileItem[];\n  folders: FolderItem[];\n  currentFolder: FolderItem | null;\n  loading: boolean;\n  uploadFile: (file: File, folderId?: string) => Promise<void>;\n  uploadFiles: (files: File[], folderId?: string) => Promise<void>;\n  deleteFile: (fileId: string) => Promise<void>;\n  createFolder: (name: string, parentId?: string) => Promise<void>;\n  deleteFolder: (folderId: string) => Promise<void>;\n  loadFiles: (folderId?: string) => Promise<void>;\n  loadFolders: (parentId?: string) => Promise<void>;\n  setCurrentFolder: (folder: FolderItem | null) => void;\n  downloadFile: (fileId: string) => Promise<void>;\n  searchFiles: (query: string) => Promise<FileItem[]>;\n}\n\nconst FileContext = createContext<FileContextType | undefined>(undefined);\n\nexport const useFiles = () => {\n  const context = useContext(FileContext);\n  if (context === undefined) {\n    throw new Error('useFiles must be used within a FileProvider');\n  }\n  return context;\n};\n\ninterface FileProviderProps {\n  children: ReactNode;\n}\n\nexport const FileProvider: React.FC<FileProviderProps> = ({ children }) => {\n  const [files, setFiles] = useState<FileItem[]>([]);\n  const [folders, setFolders] = useState<FolderItem[]>([]);\n  const [currentFolder, setCurrentFolder] = useState<FolderItem | null>(null);\n  const [loading, setLoading] = useState(false);\n  const { token } = useAuth();\n\n  const apiCall = async (url: string, options: RequestInit = {}) => {\n    const response = await fetch(`http://localhost:3001${url}`, {\n      ...options,\n      headers: {\n        Authorization: `Bearer ${token}`,\n        ...options.headers,\n      },\n    });\n\n    if (!response.ok) {\n      throw new Error(`API call failed: ${response.statusText}`);\n    }\n\n    return response.json();\n  };\n\n  const uploadFile = async (file: File, folderId?: string) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    if (folderId) {\n      formData.append('folderId', folderId);\n    }\n\n    await apiCall('/api/files/upload', {\n      method: 'POST',\n      body: formData,\n    });\n\n    // Reload files after upload\n    await loadFiles(folderId);\n  };\n\n  const uploadFiles = async (fileList: File[], folderId?: string) => {\n    setLoading(true);\n    try {\n      for (const file of fileList) {\n        await uploadFile(file, folderId);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteFile = async (fileId: string) => {\n    await apiCall(`/api/files/${fileId}`, {\n      method: 'DELETE',\n    });\n\n    // Remove file from local state\n    setFiles(prev => prev.filter(file => file.id !== fileId));\n  };\n\n  const createFolder = async (name: string, parentId?: string) => {\n    await apiCall('/api/folders', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ name, parentId }),\n    });\n\n    // Reload folders after creation\n    await loadFolders(parentId);\n  };\n\n  const deleteFolder = async (folderId: string) => {\n    await apiCall(`/api/folders/${folderId}`, {\n      method: 'DELETE',\n    });\n\n    // Remove folder from local state\n    setFolders(prev => prev.filter(folder => folder.id !== folderId));\n  };\n\n  const loadFiles = async (folderId?: string) => {\n    setLoading(true);\n    try {\n      const response = await apiCall(`/api/files${folderId ? `?folderId=${folderId}` : ''}`);\n      setFiles(response.data.files);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadFolders = async (parentId?: string) => {\n    setLoading(true);\n    try {\n      const response = await apiCall(`/api/folders${parentId ? `?parentId=${parentId}` : ''}`);\n      setFolders(response.data.folders);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const downloadFile = async (fileId: string) => {\n    const response = await apiCall(`/api/files/${fileId}/download`);\n    const { downloadUrl, fileName } = response.data;\n\n    // Create a temporary anchor element to trigger download\n    const link = document.createElement('a');\n    link.href = downloadUrl;\n    link.download = fileName;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const searchFiles = async (query: string): Promise<FileItem[]> => {\n    const response = await apiCall(`/api/files?search=${encodeURIComponent(query)}`);\n    return response.data.files;\n  };\n\n  const value = {\n    files,\n    folders,\n    currentFolder,\n    loading,\n    uploadFile,\n    uploadFiles,\n    deleteFile,\n    createFolder,\n    deleteFolder,\n    loadFiles,\n    loadFolders,\n    setCurrentFolder,\n    downloadFile,\n    searchFiles,\n  };\n\n  return <FileContext.Provider value={value}>{children}</FileContext.Provider>;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}